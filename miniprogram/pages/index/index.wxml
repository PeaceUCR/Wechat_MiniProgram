<!--index.wxml-->
<!-- 需要使用 button 来授权登录 -->
<view wx:if="{{!isAuthrized}}">
<button class='authrize-button' wx:if="{{canIUse}}" open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo">能告诉我你叫什么吗？</button>
<view wx:else>请升级微信版本</view>
</view>
<view wx:if="{{isAuthrized}}" class="container">

  <!-- 用户 openid -->
  <view class="userinfo">
    <image
      class="userinfo-avatar"
      style="background-image: url({{avatarUrl}})"></image> 
    <view>
      <view>{{userName}}</view>
        <div class="animate seven">
			<span>哈</span><span>喽</span><span>！</span>
			<span>有</span><span>什</span><span>么</span><span>想</span><span>对</span><span>我</span><span>说</span><span>嘛</span>
  </div>
    </view>
  </view>


  <!-- 上传图片 -->
  <view class="uploader">
    <view class="uploader-text" bindtap="doUpload">
      <text>上传图片</text>
    </view>
    <view class="uploader-container" wx:if="{{imgUrl}}">
      <image class="uploader-image" src="{{imgUrl}}" mode="aspectFit" bindtap="previewImg"></image>
    </view>
  </view>


  <!-- 操作数据库 -->
  <view class="uploader">
    <navigator url="../databaseGuide/databaseGuide" open-type="navigate" class="uploader-text">
      <text>前端操作数据库</text>
    </navigator>
  </view>

  <view class="input-container">
    <button class="yes-button" bindtap='handleToggleClick'>{{isInput ? 'Add':'Yes?'}}</button>
    <input class="input-field {{isInput ? 'show':'hidden'}}" bindinput="handleInputChange" value="{{inputContent}}"></input>
  </view>

  <view class="msg-list">
    <view class="loading-container" wx:if="{{isLoading}}">
        <div class="lds-css ng-scope"><div style="width:100%;height:100%" class="lds-eclipse"><div></div></div></div>
    </view>
    <view wx:for="{{msgList}}" wx:key="{{index}}" class="msg">
      <view class="userinfo {{item.avatarUrl === avatarUrl &&item.userName === userName ? 'is-mine' : ''}}">
        <image
          class="userinfo-avatar"
          style="background-image: url({{item.avatarUrl}})"></image> 
          <view class="detail">{{item.detail}}</view>
      </view>

    </view>
  </view>
</view>
